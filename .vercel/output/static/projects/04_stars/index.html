<!DOCTYPE html><html lang="en" data-astro-cid-jf37aiux><head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/imgs/me.webp"><meta name="viewport" content="width=device-width"><meta name="generator" content="Astro v3.1.0"><title>Star&#39;s rating predictor</title><meta name="description" content="NLP predictor based on Amazon's products comments"><style>[data-astro-cid-jf37aiux]{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html{background-color:#1a1a1a;color:#fff;font-family:system-ui,sans-serif}h1[data-astro-cid-jf37aiux]{font-size:4vw;font-weight:800;margin:0;padding:2vw;display:grid;place-items:center;background-image:var(--accent-gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-size:110%;background-position:0%;text-transform:uppercase;cursor:default}:root{--accent: 255, 80, 80;--accent-gradient: linear-gradient(45deg, rgb(var(--accent)), #990000 30%, white 60%)}#title[data-astro-cid-jf37aiux]{border-bottom-style:solid;border-bottom-color:transparent;border-image:linear-gradient(to right,#990000,white) 1;margin-bottom:2%;margin-top:6vw}section[data-astro-cid-jf37aiux]{margin-top:3%}img[data-astro-cid-jf37aiux],svg[data-astro-cid-jf37aiux]{display:inline-block}#projectImage[data-astro-cid-jf37aiux]{display:block;width:99%;top:0;aspect-ratio:16/9;background-color:#f0f8ff;border-radius:.6rem}#githubIcon[data-astro-cid-jf37aiux]{position:absolute;display:none;left:50%;top:0;transform:translate(-50%,10%);fill:#fff;width:50%}#githubLink[data-astro-cid-jf37aiux]{position:relative;display:inline-block;margin:0 auto;width:70%;display:flex;justify-content:center}#githubLink[data-astro-cid-jf37aiux]:hover #projectImage[data-astro-cid-jf37aiux]{opacity:.5;width:100%}#githubLink[data-astro-cid-jf37aiux]:hover #githubIcon[data-astro-cid-jf37aiux]{display:block}#divPhoto[data-astro-cid-jf37aiux]{position:relative;width:100%}#content[data-astro-cid-jf37aiux]{margin-bottom:50vh}@media only screen and (max-width: 1200px){h1[data-astro-cid-jf37aiux]{padding-left:4vw}#title[data-astro-cid-jf37aiux]{margin-top:20vw}}@media only screen and (max-width: 600px){h1[data-astro-cid-jf37aiux]{padding-left:6vw}#title[data-astro-cid-jf37aiux]{margin-top:25vw}}@media only screen and (max-width: 450px){h1[data-astro-cid-jf37aiux]{padding-left:6vw}#title[data-astro-cid-jf37aiux]{margin-top:30vw}}
</style>
<link rel="stylesheet" href="/_astro/01_coins.42c85478.css" />
<style>#backArrowSvg{fill:#1a1a1a;background-color:rgb(var(--accent));border-radius:50%;margin:0;z-index:99;position:fixed;top:8.5vw;left:5vw;width:3.5vw;height:3.5vw}@media only screen and (min-width: 1200px){#backArrowA:hover #backArrowSvg{background-color:#fff;width:4vw;height:4vw;left:4.75vw;top:8.25vw}}@media only screen and (max-width: 1200px){#backArrowSvg{top:22vw;left:7vw;width:5vw;height:5vw}}@media only screen and (max-width: 600px){#backArrowSvg{top:26vw;left:7vw;width:7vw;height:7vw}}@media only screen and (max-width: 450px){#backArrowSvg{top:30.5vw;left:7vw;width:8vw;height:8vw}}
#downArrow,#upArrow{position:fixed;right:10px;bottom:10px;width:10%;height:10%;z-index:1}html:not([data-scroll="0"]) #downArrow{display:none}html:is([data-scroll="0"]) #upArrow{display:none}
</style><script type="module" src="/_astro/hoisted.453f4b5a.js"></script></head><body data-astro-cid-jf37aiux><header data-astro-cid-jf37aiux><div id="navbar" data-astro-cid-5blmo7yk><div class="contact" data-astro-cid-5blmo7yk><div class="contact" data-astro-cid-xmivup5a><a href="https://github.com/alvarolarraya" target="_blank" title="github" data-astro-cid-xmivup5a><svg xmlns="http://www.w3.org/2000/svg" width="4%" height="4%" class="bi bi-github" viewBox="0 0 16 16" data-astro-cid-xmivup5a><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-xmivup5a></path></svg></a><a href="https://linkedin.com/in/√°lvaro-larraya-830700240" target="_blank" title="linkedin" data-astro-cid-xmivup5a><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" data-astro-cid-xmivup5a><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z" data-astro-cid-xmivup5a></path></svg></a><a href="https://mail.google.com/mail/?view=cm&#38;fs=1&#38;to=alvaro.larraya1@gmail.com" target="_blank" title="send me an email" data-astro-cid-xmivup5a><svg xmlns="http://www.w3.org/2000/svg" width="4%" height="4%" class="bi bi-envelope-at-fill" viewBox="0 0 16 16" data-astro-cid-xmivup5a><path d="M2 2A2 2 0 0 0 .05 3.555L8 8.414l7.95-4.859A2 2 0 0 0 14 2H2Zm-2 9.8V4.698l5.803 3.546L0 11.801Zm6.761-2.97-6.57 4.026A2 2 0 0 0 2 14h6.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.606-3.446l-.367-.225L8 9.586l-1.239-.757ZM16 9.671V4.697l-5.803 3.546.338.208A4.482 4.482 0 0 1 12.5 8c1.414 0 2.675.652 3.5 1.671Z" data-astro-cid-xmivup5a></path><path d="M15.834 12.244c0 1.168-.577 2.025-1.587 2.025-.503 0-1.002-.228-1.12-.648h-.043c-.118.416-.543.643-1.015.643-.77 0-1.259-.542-1.259-1.434v-.529c0-.844.481-1.4 1.26-1.4.585 0 .87.333.953.63h.03v-.568h.905v2.19c0 .272.18.42.411.42.315 0 .639-.415.639-1.39v-.118c0-1.277-.95-2.326-2.484-2.326h-.04c-1.582 0-2.64 1.067-2.64 2.724v.157c0 1.867 1.237 2.654 2.57 2.654h.045c.507 0 .935-.07 1.18-.18v.731c-.219.1-.643.175-1.237.175h-.044C10.438 16 9 14.82 9 12.646v-.214C9 10.36 10.421 9 12.485 9h.035c2.12 0 3.314 1.43 3.314 3.034v.21Zm-4.04.21v.227c0 .586.227.8.581.8.31 0 .564-.17.564-.743v-.367c0-.516-.275-.708-.572-.708-.346 0-.573.245-.573.791Z" data-astro-cid-xmivup5a></path></svg></a></div></div><div id="menu" data-astro-cid-5blmo7yk><label data-astro-cid-3weo6hls><input type="checkbox" data-astro-cid-3weo6hls><span class="menu" data-astro-cid-3weo6hls><span class="hamburger" data-astro-cid-3weo6hls></span></span><ul data-astro-cid-3weo6hls><li class="link-card" data-astro-cid-jrov5ssf><a href="/" data-astro-cid-jrov5ssf><h2 data-astro-cid-jrov5ssf>üè†<span id="text" data-astro-cid-jrov5ssf>Home</span></h2></a></li><li class="link-card" data-astro-cid-jrov5ssf><a href="/projects/" data-astro-cid-jrov5ssf><h2 data-astro-cid-jrov5ssf>üë®üèª‚Äçüíª<span id="text" data-astro-cid-jrov5ssf>Projects</span></h2></a></li><li class="link-card" data-astro-cid-jrov5ssf><a href="/about/" data-astro-cid-jrov5ssf><h2 data-astro-cid-jrov5ssf>üôãüèª‚Äç‚ôÇÔ∏è<span id="text" data-astro-cid-jrov5ssf>About me</span></h2></a></li></ul></label></div></div><div id="title" data-astro-cid-jf37aiux><style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();;(()=>{var b=Object.defineProperty;var f=(a,s,i)=>s in a?b(a,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[s]=i;var d=(a,s,i)=>(f(a,typeof s!="symbol"?s+"":s,i),i);var u;{let a={0:t=>m(t),1:t=>i(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(i(t)),5:t=>new Set(i(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},s=t=>{let[e,r]=t;return e in a?a[e](r):void 0},i=t=>t.map(s),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,r])=>[e,s(r)]));customElements.get("astro-island")||customElements.define("astro-island",(u=class extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var l;if(!this.hydrator||!this.isConnected)return;let e=(l=this.parentElement)==null?void 0:l.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let r=this.querySelectorAll("astro-slot"),c={},h=this.querySelectorAll("template[data-astro-template]");for(let n of h){let o=n.closest(this.tagName);o!=null&&o.isSameNode(this)&&(c[n.getAttribute("data-astro-template")||"default"]=n.innerHTML,n.remove())}for(let n of r){let o=n.closest(this.tagName);o!=null&&o.isSameNode(this)&&(c[n.getAttribute("name")||"default"]=n.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(n){let o=this.getAttribute("component-url")||"<unknown>",y=this.getAttribute("component-export");throw y&&(o+=` (export ${y})`),console.error(`[hydrate] Error parsing props for component ${o}`,this.getAttribute("props"),n),n}await this.hydrator(this)(this.Component,p,c,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((e,r)=>{r.disconnect(),setTimeout(()=>this.childrenConnectedCallback(),0)}).observe(this,{childList:!0})}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}start(){let e=JSON.parse(this.getAttribute("opts")),r=this.getAttribute("client");if(Astro[r]===void 0){window.addEventListener(`astro:${r}`,()=>this.start(),{once:!0});return}Astro[r](async()=>{let c=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),c?import(c):()=>()=>{}]),l=this.getAttribute("component-export")||"default";if(!l.includes("."))this.Component=h[l];else{this.Component=h;for(let n of l.split("."))this.Component=this.Component[n]}return this.hydrator=p,this.hydrate},e,this)}attributeChangedCallback(){this.hydrate()}},d(u,"observedAttributes",["props"]),u))}})();</script><astro-island uid="1HUK9L" component-url="/_astro/ReturnArrow.d99bc249.js" component-export="default" renderer-url="/_astro/client.de827894.js" props="{&quot;cardNumber&quot;:[0,5],&quot;data-astro-cid-jf37aiux&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;ReturnArrow&quot;,&quot;value&quot;:true}"></astro-island><h1 id="topHeader" style="view-transition-name:stars_ttl" data-astro-cid-jf37aiux>Star&#39;s rating predictor</h1></div><astro-island uid="ZdaQS4" component-url="/_astro/ScrollArrow.d92e6e71.js" component-export="default" renderer-url="/_astro/client.de827894.js" props="{&quot;down&quot;:[0,&quot;#content&quot;],&quot;up&quot;:[0,&quot;#&quot;],&quot;data-astro-cid-jf37aiux&quot;:[0,true]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;ScrollArrow&quot;,&quot;value&quot;:&quot;react&quot;}"></astro-island></header><div id="divPhoto" data-astro-cid-jf37aiux><a id="githubLink" href="https://github.com/alvarolarraya/RatingPredictorBasedOnCommentaries" target="_blank" data-astro-cid-jf37aiux><img id="projectImage" src="/imgs/stars.webp" alt="" style="view-transition-name:stars_img" data-astro-cid-jf37aiux><svg id="githubIcon" xmlns="http://www.w3.org/2000/svg" class="bi bi-github" viewBox="0 0 16 16" data-astro-cid-jf37aiux><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z" data-astro-cid-jf37aiux></path></svg></a></div><div id="content" data-astro-cid-jf37aiux><h2 class="h2MdTitles">Index</h2>
<ul>
  <li> ‚¶ø <a href="#generalExplanation">What's all this about? üò∂</a></li>
  <li> ‚¶ø <a href="#scraping">Web scraping</a></li>
  <li> ‚¶ø <a href="#tokenization">Tokenization</a></li>
  <li> ‚¶ø <a href="#stemming">Stemming</a></li>
  <li> ‚¶ø <a href="#bagOfWords">Bag of words</a></li>
  <li> ‚¶ø <a href="#tfidf">TF-IDF</a></li>
  <li> ‚¶ø <a href="#model">Regression model</a></li>
  <li> ‚¶ø <a href="#implementation">Implementation  üë®üèª‚Äçüíª</a></li>
</ul>
<h2 class="h2MdTitles" id="generalExplanation">What's all this about? üò∂</h2>
<div><p>A groupal university project I made with a collegue. It consists of predicting Amazon book ratings from 0 to 5 stars based on comments. We could select the dataset we wanted joining every Amazon's book comments and ratings.</p></div>
<h2 class="h2MdTitles" id="scraping">Web scraping</h2>
<div>
  <p>To have the dataset ready to use we had first to generate it. Using Beautiful Soup we went through all the pages saving the stars and the comments.</p>
  <div class="centerImgDiv">
    <img class="webScrappingImg" src="/imgs/commentsScrapping.webp">
  </div>
  <div class="centerImgDiv">
    <img class="webScrappingImg" src="/imgs/starsScrapping.webp">
  </div>
  <div class="centerImgDiv">
    <img class="webScrappingImg" src="/imgs/nextPageScrapping.webp">
  </div>
  <p>To make sure we browsed all the pages the next page button had to be disactivated.</p>
</div>
<h2 class="h2MdTitles" id="tokenization">Tokenization</h2>
<div>
  <p>The first step was to tokenize the comments, in our case we chose to use words as tokens and removed everything that isn't a word such as emojis or symbols.</p>
</div>
<h2 class="h2MdTitles" id="stemming">Stemming</h2>
<div>
  <p>The process of reducing a word to its word stem that affixes to suffixes and prefixes or the roots.</p>
  <div class="centerImgDiv">
    <img id="stemmingImg" src="/imgs/stemming.webp">
  </div>
  <p>This causes similar words to be stored as the same root, which reduces the dimensionality of the problem and helps us to improve the model since words with similar roots usually give us similar information.</p>
</div>
<h2 class="h2MdTitles" id="bagOfWords">Bag of words</h2>
<div>
  <p>Before obtaining the word frequency table we thought that it would be a good idea to eliminate words that are used very frequently in Spanish and that do not really provide important information for later classification, that is why we have used "stop words", thus reducing the dataset considerably without losing relevant information.</p>
  <p>Once this is done, we have gone on to obtain our corpus and our frequency table.</p>
</div>
<h2 class="h2MdTitles" id="tfidf">TF-IDF</h2>
<div>
  <p>We have complemented the bag of words by applying TF-IDF, which is a process that assigns weights to each word in the text. Unlike the standard bag of words which only sees how many times the word appears in the text. TF-IDF gives more importance to those words that appear a lot within the same text and are rarely found in other texts.</p>
</div>
<h2 class="h2MdTitles" id="model">Regression model</h2>
<div>
  <p>We tried several models, the one that worked best for us is logistic regression with balanced weights for each class. What this does is to give more weight to minority classes. So we avoid that in case of doubt it predicts 5 stars. In addition, we applied logistic regression in conjunction with OVA (One Versus All) because it is a multiclass problem. We obtained a final 63.13% of test accuracy.</p>
</div>
<h2 class="h2MdTitles" id="implementation">Implementation  üë®üèª‚Äçüíª</h2>
<div>
  <p>This models are made with  Python libraries such as <b>Beautiful Soup</b>, <b>Scikit Learn</b>, <b>Re</b> and <b>NLTK</b>. To see the code firsthand click on the image at the top of the page.</p>
</div>
<link href="https://fonts.googleapis.com/css?family=Caveat" rel="stylesheet">
<style>
  .h2MdTitles{
    text-align: center;
    font-size: 6rem;
    display: block;
    margin: 0 auto;
    width: 70%;   
    line-height: 4rem; 
    font-family: "Caveat";
    padding-bottom:2vh;
    margin-bottom:4vh;
    border-bottom: 3px rgb(var(--accent)) dashed;
    margin-top:15vh;
  }
  p{
    text-align: center;
    font-size: 3rem;
    display: block;
    margin: 0 auto;
    width: 70%;   
    line-height: 4rem; 
    font-family: "Caveat";
    margin-top:4vh;
  }
  b{
    font-size: 4rem;
    background-color: #2E2E2E;
  }
  li{
    text-align: left;
    padding-left:30vw;
    padding-top:1vh;
  }
  img{
    display: block;
    margin-left: auto;
    margin-right: auto;
    margin-top:2vh;
    width: 75vw;
  }
  ul{
    text-align: -webkit-center;
    font-size: 3rem;  
    line-height: 4rem; 
    font-family: "Caveat";
    margin-top:2vh;
    list-style-type: none;
  }
  a{
    color: rgb(var(--accent));
  }
  .subList{
    padding-left:40vw;
  }
  h3{
    text-align: center;
    font-size: 5rem;
    display: block;
    margin: 0 auto;
    width: 50%;   
    line-height: 4rem; 
    font-family: "Caveat";
    padding-bottom:2vh;
    margin-bottom:4vh;
    border-bottom: 3px #990000 dashed;
    margin-top:15vh;
  }
  table {
    margin-left:auto; 
    margin-right:auto;
    font-size: 3rem;
    line-height: 4rem; 
    font-family: "Caveat";
    margin-top:10vh;    
  }
  th,td{
    border: 2px solid #990000;
    text-align: -webkit-center;
    width:1%;
  }
  .emptyTableCell{
    border:0;
  }
  th{
    font-size: 4rem;
  }
  #titleTable{
    text-decoration:underline;
  }
  table{
    width:70vw;
  }
  .centerImgDiv{
    display: flex;
    justify-content: center;
  }
  .webScrappingImg{
    width:70vw;
    margin: 5vw;
    border-radius: 0.6rem;
    background-color:white;
  }
  #stemmingImg{
    width:30vw;
    margin: 5vw;
    border-radius: 0.6rem;
  }
  @media only screen and (max-width: 1200px){
		th{
      font-size:2.5rem;
    }
    td{
      font-size:2rem;
    }
    h2,h3{
      font-size:5rem;
    }
    li{
      padding-left:15vw;
    }
    ul{
      text-align: -webkit-center;
      font-size: 2.5rem;  
      line-height: 4rem; 
      font-family: "Caveat";
      margin-top:2vh;
      list-style-type: none;
    }
    .subList{
      padding-left:25vw;
    }
    p{
      font-size: 2.5rem;
      line-height: 4rem; 
    }
    b{
      font-size: 3rem;
      background-color: #2E2E2E;
    }
	}
  @media only screen and (max-width: 600px){
		th{
      font-size:1rem;
    }
    td{
      font-size:1rem;
    }
    h2,h3{
      font-size:2rem;
    }
    li{
      padding-left:10vw;
    }
    ul{
      text-align: -webkit-center;
      font-size: 1rem;  
      line-height: 2rem; 
      font-family: "Caveat";
      margin-top:2vh;
      list-style-type: none;
    }
    .subList{
      padding-left:20vw;
    }
    p{
      font-size: 1rem;
      line-height: 2rem; 
    }
    b{
      font-size: 1.5rem;
      background-color: #2E2E2E;
    }
	}
</style></div></body></html>